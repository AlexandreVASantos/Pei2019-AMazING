{%  load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="icon" href="{% static 'img/favicon.png' %}">
  <title>SwitchController</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="{% static 'Controller/base.css'%}">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript">

    google.charts.load('current', {packages: ['corechart', 'bar']});
    google.charts.setOnLoadCallback(HoursNode);
    google.charts.setOnLoadCallback(drawAlertsByNode);

    function HoursNode() {
          var data = new google.visualization.DataTable();

          data.addColumn('number', 'Node Number');
          data.addColumn('number', 'Number of hours');

          var node1 = parseInt("{{hours.1}}");
          var node2 = parseInt("{{hours.2}}");
          var node3 = parseInt("{{hours.3}}");
          var node4 = parseInt("{{hours.4}}");
          var node5 = parseInt("{{hours.5}}");
          var node6 = parseInt("{{hours.6}}");
          var node7 = parseInt("{{hours.7}}");
          var node8 = parseInt("{{hours.8}}");
          var node9 = parseInt("{{hours.9}}");
          var node10 = parseInt("{{hours.10}}");
          var node11 = parseInt("{{hours.11}}");
          var node12 = parseInt("{{hours.12}}");
          var node13 = parseInt("{{hours.13}}");
          var node14 = parseInt("{{hours.14}}");
          var node15 = parseInt("{{hours.15}}");
          var node16 = parseInt("{{hours.16}}");
          var node17 = parseInt("{{hours.17}}");
          var node18 = parseInt("{{hours.18}}");
          var node19 = parseInt("{{hours.19}}");
          var node20 = parseInt("{{hours.20}}");
          var node21 = parseInt("{{hours.21}}");
          var node22 = parseInt("{{hours.22}}");
          var node23 = parseInt("{{hours.23}}");
          var node24 = parseInt("{{hours.24}}");


          data.addRows([
            [{v: 1, f: 'node 1'}, node1 ],
            [{v: 2, f: 'node 2'}, node2 ],
            [{v: 3, f: 'node 3'}, node3 ],
            [{v: 4, f: 'node 4'}, node4 ],
            [{v: 5, f: 'node 5'}, node5 ],
            [{v: 6, f: 'node 6'}, node6 ],
            [{v: 7, f: 'node 7'}, node7 ],
            [{v: 8, f: 'node 8'}, node8 ],
            [{v: 9, f: 'node 9'}, node9 ],
            [{v: 10, f: 'node 10'}, node10 ],
            [{v: 11, f: 'node 11'}, node11 ],
            [{v: 12, f: 'node 12'}, node12 ],
            [{v: 13, f: 'node 13'}, node13 ],
            [{v: 14, f: 'node 14'}, node14 ],
            [{v: 15, f: 'node 15'}, node15 ],
            [{v: 16, f: 'node 16'}, node16 ],
            [{v: 17, f: 'node 17'}, node17 ],
            [{v: 18, f: 'node 18'}, node18 ],
            [{v: 19, f: 'node 19'}, node19 ],
            [{v: 20, f: 'node 20'}, node20 ],
            [{v: 21, f: 'node 21'}, node21 ],
            [{v: 22, f: 'node 22'}, node22 ],
            [{v: 23, f: 'node 23'}, node23 ],
            [{v: 24, f: 'node 24'}, node24 ],
            

          ]);

          var options = {
            title: 'Numbers of hours by Node',

            hAxis: {
              title: 'Node Number',
              viewWindow: {
                min: 0,
                max: 25
              }
            },
            vAxis: {
              title: 'Number of hours'
            }
          };

          var chart = new google.visualization.ColumnChart(document.getElementById('chart_div1'));
          chart.draw(data, options);

        }

      function drawAlertsByNode() {
          var data = new google.visualization.DataTable();

          data.addColumn('number', 'Node Number');
          data.addColumn('number', 'Number of alerts');

          var node1 = parseInt("{{n_alerts_node.1}}");
          var node2 = parseInt("{{n_alerts_node.2}}");
          var node3 = parseInt("{{n_alerts_node.3}}");
          var node4 = parseInt("{{n_alerts_node.4}}");
          var node5 = parseInt("{{n_alerts_node.5}}");
          var node6 = parseInt("{{n_alerts_node.6}}");
          var node7 = parseInt("{{n_alerts_node.7}}");
          var node8 = parseInt("{{n_alerts_node.8}}");
          var node9 = parseInt("{{n_alerts_node.9}}");
          var node10 = parseInt("{{n_alerts_node.10}}");
          var node11 = parseInt("{{n_alerts_node.11}}");
          var node12 = parseInt("{{n_alerts_node.12}}");
          var node13 = parseInt("{{n_alerts_node.13}}");
          var node14 = parseInt("{{n_alerts_node.14}}");
          var node15 = parseInt("{{n_alerts_node.15}}");
          var node16 = parseInt("{{n_alerts_node.16}}");
          var node17 = parseInt("{{n_alerts_node.17}}");
          var node18 = parseInt("{{n_alerts_node.18}}");
          var node19 = parseInt("{{n_alerts_node.19}}");
          var node20 = parseInt("{{n_alerts_node.20}}");
          var node21 = parseInt("{{n_alerts_node.21}}");
          var node22 = parseInt("{{n_alerts_node.22}}");
          var node23 = parseInt("{{n_alerts_node.23}}");
          var node24 = parseInt("{{n_alerts_node.24}}");


          data.addRows([
            [{v: 1, f: 'node 1'}, node1 ],
            [{v: 2, f: 'node 2'}, node2 ],
            [{v: 3, f: 'node 3'}, node3 ],
            [{v: 4, f: 'node 4'}, node4 ],
            [{v: 5, f: 'node 5'}, node5 ],
            [{v: 6, f: 'node 6'}, node6 ],
            [{v: 7, f: 'node 7'}, node7 ],
            [{v: 8, f: 'node 8'}, node8 ],
            [{v: 9, f: 'node 9'}, node9 ],
            [{v: 10, f: 'node 10'}, node10 ],
            [{v: 11, f: 'node 11'}, node11 ],
            [{v: 12, f: 'node 12'}, node12 ],
            [{v: 13, f: 'node 13'}, node13 ],
            [{v: 14, f: 'node 14'}, node14 ],
            [{v: 15, f: 'node 15'}, node15 ],
            [{v: 16, f: 'node 16'}, node16 ],
            [{v: 17, f: 'node 17'}, node17 ],
            [{v: 18, f: 'node 18'}, node18 ],
            [{v: 19, f: 'node 19'}, node19 ],
            [{v: 20, f: 'node 20'}, node20 ],
            [{v: 21, f: 'node 21'}, node21 ],
            [{v: 22, f: 'node 22'}, node22 ],
            [{v: 23, f: 'node 23'}, node23 ],
            [{v: 24, f: 'node 24'}, node24 ],
            

          ]);

          var options = {
            title: 'Numbers of Alerts By Node ',

            hAxis: {
              title: 'Node Number',
              viewWindow: {
                min: 0,
                max: 25
              }
            },
            vAxis: {
              title: 'Number of Alerts'
            }
          };

          var chart = new google.visualization.ColumnChart(document.getElementById('chart_div2'));
          chart.draw(data, options);

        }
  </script>

  <script>
  function change_grid(){
    $.get("/config/", function (data) {
          for(var i = 1;i<25 ;i++){
            document.getElementById(i).innerHTML = data[i.toString()][0];
            document.getElementById(i).value = data[i.toString()][0];
            document.getElementById(i).style.backgroundColor = data[i.toString()][1];
               
        
        };

    });
  } 
 
  setTimeout(change_grid,5000000)


</script>
 

</head>
<body style="background-color:#FFFF; width: 100%; height: 100%; margin: 0px; padding: 0px; overflow-x: hidden; " >
  <nav class="navbar navbar-inverse navbar-fixed-top"  style="position: fixed; top:0px;width: 100%;border-radius:0%;background-color:#2222;border-style: none">
      
      <div class="navbar-header">
        
          <a href="/" class="navbar-brand" style="font-size: 400px;top: 0px"><img src="{% static 'img/it_logo.png' %}" alt="IT 25 Years - logo" style="width:252px; height:90px; border: 1px solid #2222;border-radius:5%;background-color:#FFFF" width="252" height="90"></a>
      </div>
      <div class="container-fluid" style="width: 100%">
        <ul class="nav navbar-nav navbar-right">
          <li><a href="{%url 'home' %}"><span class="glyphicon glyphicon-home"></span></a></li>
           <li><a href="{% url 'manual' %}"><span class="glyphicon glyphicon-book"></span></a></li>
          {% if user.authenticated %}
            {% if alert %}
              <li><a id="alert" style="color:red" href="{% url 'notifications' %}"><span class="glyphicon glyphicon-bell"></span></a></li>
            {% else %}
              <li><a id="alert" href="{% url 'notifications' %}"><span class="glyphicon glyphicon-bell"></span></a></li>
            {% endif %}
            <li><a href="{% url 'stats' %}"><span class="glyphicon glyphicon-stats"></span></a></li>
            <li><a href="{% url 'update' %}"><span class="glyphicon glyphicon-refresh"></span></a></li>
            <li><a href="{% url 'logout'%}"><span class="glyphicon glyphicon-log-out"></span> Logout</a></li>
          {% endif %}
        </ul>
          
      </div>
  </nav>
  <br>
  {% if alert %}
    {% if user.authenticated %}
      <div class= "row row-no-gutters">
        <div class="col-sm-2" style="margin-left:80%;width:15%">
          <div class="notification" >
            <div class="content">
              <div class="identifier"></div>
                <div class="text">
                    <p> You have Node Alarm Notifications! </p>
                  <br>
                </div>
            </div>
          </div>
        </div>
         <div class="col-sm-8" style="width:85%;margin-right:20%;margin-bottom: 3%">
            <div class="container" style="margin-top: 5%">
    {% else %}
      <div class="container" style="margin-top: 5%;">
    {% endif %}
          
  {% else %}
  <div class="container" style="margin-top: 5%;">
    
  {% endif %}
        <div>
          {% if failed %}
            <div class ="alert alert-danger" role="alert">
              {{message}}
            </div>
          {% elif success %}
            <div class ="alert alert-success" role="alert">
              {{message}}
            </div>    
          {% endif %}
        </div>
      {% block content %} {% endblock %}

    {% if alert%}
      </div>
    </div>
  </div>

    {% else %}
  </div>
    {% endif %}





<!-- Footer -->
<footer style="height: 150px; width: 100%; margin-top: 17%; bottom: 0%; position: relative; background-color: #0e2e5b">
    <div class="row row-no-gutters">
      <div class="col-md-4" style="color:white;bottom:-100px;width: 70%">
        <p><small>&copy; Instituto Telecomunicações Aveiro </small></p>
      </div>
      <div class="col-md-4 text-right" style="bottom:-50px;width: 22%" >
        <a href="https://www.ua.pt" target="_blank"><img  src="{% static 'img/logo_UA.png' %}" alt=""  width="35%" height="35%"></a>
      </div>
  </div>

</footer>
  <!-- Footer -->

<script type="text/javascript">

  function isValidForm(id_button){
    var i = document.getElementById(id_button);
    if( i.value == "ON"){
      var c = window.confirm("Are you sure you want to turn the node OFF?\n\nPlease make sure that no one is using it before turning it down!");
      if (c != true){
        return false;
      }
    }
    return true;
  }

  function goBack(){
    window.history.back();
  }

  var slideIndex = 1;
  showSlides(slideIndex);

  function plusSlides(n) {
    showSlides(slideIndex += n);
  }

  function currentSlide(n) {
    showSlides(slideIndex = n);
  }

  function showSlides(n) {
    var i;
    var slides = document.getElementsByClassName("mySlides");
    var dots = document.getElementsByClassName("dot");
    if (n > slides.length) {slideIndex = 1}    
    if (n < 1) {slideIndex = slides.length}
    for (i = 0; i < slides.length; i++) {
        slides[i].style.display = "none";  
    }
    for (i = 0; i < dots.length; i++) {
        dots[i].className = dots[i].className.replace(" active", "");
    }
    slides[slideIndex-1].style.display = "block";  
    dots[slideIndex-1].className += " active";
  }
    
</script>

</body>

</html>
